<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8"/>
  <style>
    @page { size: A4; margin: 20pt; }
    body {
      font-family: "DejaVu Sans", "Helvetica", sans-serif;
      font-size: 8pt;
      color: #000;
    }
    h1 { font-size: 16pt; margin: 0; }
    .header { position: relative; margin-bottom: 8pt; }
    .header img { position: absolute; top: 0; right: 0; height: 40px; }
    .meta { font-size: 10pt; margin-top: 8pt; }
    .account-line {
      display: flex;
      justify-content: space-between;
      font-size: 8pt;
      margin-top: 4pt;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 8pt;
      font-size: 8pt;
    }
    th, td { border: 1pt solid #000; padding: 2pt 4pt; vertical-align: top; }
    th { font-weight: bold; text-align: left; }
    th.amount, td.amount { text-align: right; }
    .summary {
      margin-top: 8pt;
      font-size: 10pt;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
    }
    footer {
      position: fixed;
      bottom: 20pt;
      left: 20pt;
      right: 20pt;
      font-size: 8pt;
    }
    footer .left { float: left; }
    footer .center { position: absolute; left: 50%; transform: translateX(-50%); }
    footer .right { float: right; text-align: right; }
  </style>
</head>
<body>
<div class="header">
  <img src="static/logo.svg" alt="Банк Санкт-Петербург"/>
  <h1>Выписка</h1>
  <div class="meta">Период: {{ data.statement.period_start|date }} - {{ data.statement.period_end|date }}</div>
  <div class="account-line">
    <div>Счёт: {{ data.account.number }}</div>
    <div>Входящий остаток на {{ data.statement.period_start|date }}: {{ opening_balance|amount }}</div>
  </div>
</div>

<table>
  <thead>
    <tr>
      <th style="width:75pt">Дата</th>
      <th style="width:170pt">Плательщик / Получатель</th>
      <th>Операция</th>
      <th class="amount" style="width:80pt">Сумма (RUB)</th>
    </tr>
  </thead>
  <tbody>
    {% for t in data.transactions %}
    <tr>
      <td>{{ t.date|date }}</td>
      <td>{{ t.counterparty or '' }}</td>
      <td>{{ t.description }}</td>
      <td class="amount">{{ t.amount|amount }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<div class="summary">
  <div>Исходящий остаток на {{ data.statement.period_end|date }}: {{ closing_balance|amount }}</div>
  <div>Поступление: {{ total_incoming|amount }}</div>
  <div>Списание: {{ total_outgoing|amount }}</div>
</div>

<footer>
  <div class="left">
    <div>ПАО "БАНК "САНКТ-ПЕТЕРБУРГ"</div>
    <div>БИК 044030790</div>
  </div>
  <div class="center">1/1</div>
  <div class="right">
    <div>{{ data.account.user.username }}</div>
    <div>{{ data.statement.created_at|datetime_msk }}</div>
  </div>
</footer>
</body>
</html>

